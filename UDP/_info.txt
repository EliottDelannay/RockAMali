#180MB
./udp_server 1234567 1 12 spin
receive   #99998 as #99999

./udp_server 1234567 1 12 spin
receive   #99963 as #99961

time ./udp_client 10.10.15.1 1234567 1 4096 block 100000 345678
 buf_size=4096
 num_samples=100000
 wait=345678
-send #99999
data statistics
sort %	latency (us)	rate (MB/s)
  0.0%	8.134852	5035.125690
  0.1%	9.308935	4400.073662
  1.0%	9.618383	4258.511868
 10.0%	11.171086	3666.608556
 20.0%	12.643696	3239.558985
 30.0%	13.778189	2972.814573
 40.0%	14.651470	2795.623892
 50.0%	15.294031	2678.169092
 60.0%	15.875156	2580.132058
 70.0%	16.376190	2501.192320
 80.0%	16.915904	2421.389940
 90.0%	17.847435	2295.007696
 99.0%	28.382786	1443.128216
 99.9%	41.337751	990.861829
100.0%	663.252977	61.756225
  mean	15.197464	2695.186546
elapsed	17 s	15.197464
1.348u 7.886s 0:17.69 52.1%	0+0k 0+0io 0pf+0w

                191Mb           381Mb           572Mb           763Mb      954Mb
└───────────────┴───────────────┴───────────────┴───────────────┴───────────────
10.10.15.2                 => 10.10.15.1                  179Mb   180Mb   180Mb
                           <=                            4.50Kb  4.50Kb  4.50Kb
────────────────────────────────────────────────────────────────────────────────
TX:             cum:   5.68GB   peak:	 184Mb  rates:    179Mb   180Mb   180Mb
RX:                     130KB           4.50Kb           4.50Kb  4.50Kb  4.50Kb
TOTAL:                 5.68GB            184Mb            179Mb   180Mb   180Mb


exit

#random seeding (CLI #8 option)
for((i=1;i<12;++i)); do ./udp_client 10.10.15.1 1234567 1 4096 block 1234 1234567 $i | grep write_buf; done

exit

wait=1234567
./udp_server 1234567 1 12 spin
receive   #199974 as #199962

time ./udp_client 10.10.15.1 1234567 1 4096 block
-end #199999
data statistics
sort %	latency (us)	rate (MB/s)
  0.0%	7.616023	5378.134789
  0.1%	8.276783	4948.782924
  1.0%	9.560075	4284.485140
 10.0%	12.237697	3347.034948
 20.0%	13.559216	3020.823729
 30.0%	14.376518	2849.090397
 40.0%	15.086425	2715.023644
 50.0%	15.700767	2608.789746
 60.0%	16.261866	2518.776097
 70.0%	16.872113	2427.674610
 80.0%	17.683500	2316.283585
 90.0%	19.415490	2109.655779
 99.0%	37.800250	1083.590728
 99.9%	43.159589	949.035911
100.0%	667.954279	61.321562
  mean	16.218656	2525.486712
elapsed	116 s	16.218656
9.432u 53.330s 1:56.51 53.8%	0+0k 0+0io 0pf+0w


                337Mb           675Mb           0.99Gb          1.32Gb
└───────────────┴───────────────┴───────────────┴───────────────┴───────────────
10.10.15.2                 => 10.10.15.1                 54.5Mb  54.5Mb  54.6Mb
                           <=                               0b    461b    346b
────────────────────────────────────────────────────────────────────────────────
TX:             cum:   85.5GB   peak:   54.7Mb  rates:   54.5Mb  54.5Mb  54.6Mb
RX:                    86.8MB           2.25Kb              0b    461b    346b
TOTAL:                 85.6GB           54.7Mb           54.5Mb  54.5Mb  54.6Mb


wait=2345678
./udp_server 1234567 1 12 spin
receive   #99961 as #99961

time ./udp_client 10.10.15.1 1234567 1 4096 block |end #99999
data statistics
sort %	latency (us)	rate (MB/s)
  0.0%	8.262219	4957.506099
  0.1%	9.452677	4333.163910
  1.0%	10.313666	3971.429612
 10.0%	13.208355	3101.067381
 20.0%	14.550352	2815.052253
 30.0%	15.393593	2660.847274
 40.0%	16.042065	2553.287210
 50.0%	16.609080	2466.120903
 60.0%	17.179736	2384.204300
 70.0%	17.753577	2307.140716
 80.0%	18.828448	2175.431559
 90.0%	21.835994	1875.801949
 99.0%	39.124946	1046.902400
 99.9%	54.076668	757.443119
100.0%	679.486948	60.280775
  mean	17.628805	2323.470000
elapsed	108 s	17.628805
9.067u 49.779s 1:49.01 53.9%	0+0k 0+0io 0pf+0w

                337Mb           675Mb           0.99Gb          1.32Gb
└───────────────┴───────────────┴───────────────┴───────────────┴───────────────
10.10.15.2                 => 10.10.15.1                 29.2Mb  29.2Mb  29.2Mb
                           <=                               0b      0b      0b
────────────────────────────────────────────────────────────────────────────────
TX:             cum:   86.0GB   peak:   29.2Mb  rates:   29.2Mb  29.2Mb  29.2Mb
RX:                    86.8MB              0b               0b      0b      0b
TOTAL:                 86.0GB           29.2Mb           29.2Mb  29.2Mb  29.2Mb


exit


#ethernet (100Mbps switch)
./udp_server 1234567 1 512 spin
receive   #99998 as #99999

./udp_client 193.48.111.54 1234567 1 512 spin
send #99999
statistics
  0.0%	346.001043
  0.1%	399.001203
  1.0%	664.002001
 10.0%	707.002131
 20.0%	711.002143
 30.0%	712.002146
 40.0%	713.002149
 50.0%	714.002152
 60.0%	717.002161
 70.0%	724.002182
 80.0%	792.002387
 90.0%	796.002399
 99.0%	875.002637
 99.9%	994.002996
100.0%	1672.005040
  mean	735.806328

#10GEth (cross-cable)
## server/client : broadcom/startech
./udp_server 1234567 1 512 spin
receive   #99998 as #99999

./udp_client 10.10.15.2 1234567 1 512 block
send #99999
statistics
  0.0%	97.001303
  0.1%	100.001343
  1.0%	103.001383
 10.0%	176.002364
 20.0%	177.002377
 30.0%	177.002377
 40.0%	177.002377
 50.0%	178.002391
 60.0%	178.002391
 70.0%	179.002404
 80.0%	180.002418
 90.0%	183.002458
 99.0%	207.002780
 99.9%	275.003693
100.0%	3135.042106
  mean	177.370022

##might lock
./udp_server 1234567 1 512 spin
./udp_client 10.10.15.2 1234567 1 512 spin

## server/client : startech/broadcom
### asym. rate: 3MB/300MB
./udp_server 1234567 1 12 block
receive   #99998 as #99999

./udp_client 10.10.15.1 1234567 1 4096 block
send #99999
data statistics
%	latency (us)	rate (MB)
  0.0%	88.130730	464.764109
  0.1%	97.613078	419.615905
  1.0%	99.114817	413.258088
 10.0%	100.460467	407.722571
 20.0%	101.248653	404.548592
 30.0%	101.951285	401.760507
 40.0%	102.673485	398.934543
 50.0%	103.542674	395.585688
 60.0%	104.578419	391.667805
 70.0%	105.800289	387.144499
 80.0%	108.765998	376.588280
 90.0%	118.526850	345.575706
 99.0%	183.200862	223.579735
 99.9%	383.212106	106.885976
100.0%	1142.349695	35.855921
  mean	109.697960	373.388893

###more samples
./udp_server 1234567 1 12 block
receive   #999988 as #999989

time ./udp_client 10.10.15.1 1234567 1 4096 block
send #999999
data statistics
sort %	latency (us)	rate (MB/s)
  0.0%	87.404675	468.624821
  0.1%	96.895597	422.723028
  1.0%	98.855579	414.341813
 10.0%	100.413281	407.914168
 20.0%	101.348448	404.150244
 30.0%	102.189416	400.824289
 40.0%	103.118667	397.212272
 50.0%	104.114358	393.413557
 60.0%	105.343045	388.824910
 70.0%	107.937849	379.477637
 80.0%	116.537291	351.475478
 90.0%	155.774717	262.943825
 99.0%	271.259433	150.999357
 99.9%	430.856731	95.066404
100.0%	9852.909453	4.157148
  mean	117.441108	348.770550
elapsed	118 s	117.441108
2.559u 21.404s 1:58.49 20.2%	0+0k 0+0io 0pf+0w


## 4096
iftop -i eth6
                191Mb           381Mb           572Mb           763Mb      954Mb
└───────────────┴───────────────┴───────────────┴───────────────┴───────────────
10.10.15.2                 => 10.10.15.1                  287Mb   287Mb   287Mb
                           <=                            2.75Mb  2.76Mb  2.75Mb
────────────────────────────────────────────────────────────────────────────────
TX:             cum:   12.1GB   peak:	 291Mb  rates:    287Mb   287Mb   287Mb
RX:                    1.22GB           2.79Mb           2.75Mb  2.76Mb  2.75Mb
TOTAL:                 13.3GB            294Mb            289Mb   290Mb   289Mb

## 1024
iftop -i eth6
                204Mb           407Mb           611Mb           814Mb     0.99Gb
└───────────────┴───────────────┴───────────────┴───────────────┴───────────────
10.10.15.2                 => 10.10.15.1                 90.6Mb  80.4Mb  75.4Mb
                           <=                            3.44Mb  3.06Mb  2.87Mb
────────────────────────────────────────────────────────────────────────────────
TX:             cum:   5.73GB   peak:	90.6Mb  rates:   90.6Mb  80.4Mb  75.4Mb
RX:                    79.6MB           3.44Mb           3.44Mb  3.06Mb  2.87Mb
TOTAL:                 5.81GB           94.0Mb           94.0Mb  83.5Mb  78.3Mb

